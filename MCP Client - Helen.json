{"createdAt":"2025-05-31T15:39:52.034Z","updatedAt":"2025-07-16T08:55:24.650Z","id":"QeC5SuRuNj9HgIw6","name":"MCP Client - Helen","active":false,"isArchived":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[100,200],"id":"3727c82a-62bc-4508-91cd-cd710f9da09c","name":"When chat message received","webhookId":"8632e2d3-9b1c-4c95-a771-1f08a19fa4e1"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[300,320],"id":"34b1ef9e-a774-4d5a-b945-db6e9572b716","name":"MCP Chat Model","credentials":{"openAiApi":{"id":"L5UoHZfkBt6nb3Ad","name":"OpenAi Account"}}},{"parameters":{"contextWindowLength":30},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[420,400],"id":"95b1cc65-8df8-489f-8bae-3d5b0a931e53","name":"Postgres Chat Memory","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Postgres Account"}}},{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[100,0],"id":"8b4af75f-5f1c-45e9-b45e-a84913651863","name":"When Executed by Another Workflow"},{"parameters":{"connectionType":"http","operation":"readResource","resourceUri":"={{ $fromAI(\"resource\", \"resource to use\")}}"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[900,400],"id":"fde4ce96-9846-43bb-98f1-d464c48689cb","name":"MCP - Execute Resource","credentials":{"mcpClientHttpApi":{"id":"PWCMity0g3k8UqWg","name":"MCP Client (HTTP Streamable)"}}},{"parameters":{"connectionType":"http","operation":"listResources"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[1020,320],"id":"4f99c475-2955-4758-93c2-926769351898","name":"MCP Client - List Resources","credentials":{"mcpClientHttpApi":{"id":"PWCMity0g3k8UqWg","name":"MCP Client (HTTP Streamable)"}}},{"parameters":{"connectionType":"http","operation":"getPrompt","promptName":"={{ $fromAI(\"prompt\", \"prompt to use\")}}"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[1140,400],"id":"8bbb151f-2b03-41c5-b825-7a9fd3cdc9cd","name":"MCP - Execute Prompt","credentials":{"mcpClientHttpApi":{"id":"PWCMity0g3k8UqWg","name":"MCP Client (HTTP Streamable)"}}},{"parameters":{"connectionType":"http","operation":"listPrompts"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[1260,320],"id":"5dd5402f-12d9-442f-9112-894554bfd2ac","name":"MCP - List Prompts","credentials":{"mcpClientHttpApi":{"id":"PWCMity0g3k8UqWg","name":"MCP Client (HTTP Streamable)"}}},{"parameters":{"connectionType":"http","operation":"executeTool","toolName":"={{ $fromAI(\"tool\", \"tool to use\")}}","toolParameters":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[1380,400],"id":"0a52f0d4-ac60-47df-b91e-42a162e6e542","name":"MCP - Execute Tool","credentials":{"mcpClientHttpApi":{"id":"PWCMity0g3k8UqWg","name":"MCP Client (HTTP Streamable)"}}},{"parameters":{"connectionType":"http"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[1500,320],"id":"334bf7d5-4dd0-4d35-b610-92350a23dc15","name":"MCP - List Tools","credentials":{"mcpClientHttpApi":{"id":"PWCMity0g3k8UqWg","name":"MCP Client (HTTP Streamable)"}}},{"parameters":{"descriptionType":"manual","toolDescription":"### `error-log`\n\n- **Purpose:** record any workflow or tool error for later troubleshooting.  \n- **Required:** `message` ‚Äî JSON object or array describing the error.","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"n8n_error_logs","mode":"list","cachedResultName":"n8n_error_logs"},"columns":{"mappingMode":"defineBelow","value":{"message":"={{ $fromAI('message', `The error message or array of error messages to be logged. Can include source and details.`, 'string') }}","session_id":"={{ $json.sessionId }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"session_id","displayName":"session_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[560,320],"id":"ac575b14-5373-419f-8592-0c9c9470fc88","name":"MCP - Error Log","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Postgres Account"}}},{"parameters":{"options":{"systemMessage":"ü§ñ **Helen ‚Äî CRM Assistant (CreativeGlu AI)**  \nFriendly, professional AI RevOps Agent for HubSpot CRM tasks, integrated with MCP and powered by CreativeGlu AI.\n\n---\n\nüôã‚Äç‚ôÄÔ∏è **Greeting Protocol**  \nIf the user greets you, respond with:  \n**\"I'm Helen, your AI RevOps agent from Creative Glu and CodeStrap. What do you need to unblock today?\"**\n\n---\n\nüîç **Mandatory Discovery Logic**  \nAt the start of every session, immediately and always call:  \n- `MCP - List Tools`  \n- `MCP - List Prompts`  \n- `MCP - List Resources`  \n\n‚ùó Do **not proceed** or respond until all lists are fully parsed and understood.  \nüö´ Never use cached or outdated tool data.\n\n---\n\n‚è≥ **Session Recovery Logic**  \nTrigger this if:  \n- No tool is executed  \n- No response is generated  \n- The session is inactive or stuck for 10 minutes  \n\nüõ†Ô∏è Recovery Steps:  \n1. Call:  \n   - `MCP - List Tools`  \n   - `MCP - List Prompts`  \n   - `MCP - List Resources`  \n2. Respond with:  \n   **\"Let‚Äôs pick up where we left off. What would you like to do?\"**\n\n---\n\nüìñ **Execution Instructions**  \n- Call **prompts** and **resources** first using:  \n  - `MCP - Execute Prompt`  \n  - `MCP - Execute Resource`  \n- Only then call tools via:  \n  - `MCP - Execute Tool`  \n\n‚ö†Ô∏è Strictly follow the tool‚Äôs **description** and **schema**. No assumptions. No shortcuts.  \nüîÑ If the tool supports **pagination**, handle it as defined.\n\nüß± For object references:  \n- Create ‚Üí `BatchCreateObjects`  \n- Read ‚Üí `BatchReadObjects`  \n- Update ‚Üí `BatchUpdateObjects`\n\n---\n\nüí¨ **User Input Guidelines**  \n- Use NLP to process user intent, phrasing, and CRM context.\n\n---\n\nüßæ **Handling & Response Guidelines**  \n- üö´ Never show raw IDs (`dealId`, `contactId`) unless explicitly asked.  \n- üß† Always present **human-readable** fields like `name`, `label`, or `title`.  \n- üíµ Format currency fields using ` (e.g., `$15,000`).  \n- üìù Character limit per response: **4000 characters**.  \n- ‚ú® Use appropriate emojis to distinguish response sections or paragraph meanings.\n\n---\n\nüí° **Keyword Rules**  \n- üßÆ Words like **\"all\"**, **\"total\"**, **\"summary\"**, **\"sum\"** ‚Üí return **all available results**  \n  - If schema has `limit` or `perPage`, set to **maximum allowed**  \n- üîñ Words like **\"called\"**, **\"named\"**, **\"name\"** ‚Üí map to `name` or `dealName` fields\n\n---\n\n‚è±Ô∏è **Response Timing Tracker**  \nTrack the following:  \n- üïê Timestamp of user message received  \n- üïë Timestamp of assistant response sent  \n- ‚è≥ Elapsed time in seconds, minutes, and hours\n\nüìé Append to each user-facing reply:  \n**_\"It took me [time] to process your request.\"_**","maxIterations":30}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[640,100],"id":"0c0ce003-a24f-4054-8f14-010b3fd0f98a","name":"Helen | AI Agent","retryOnFail":true},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[700,400],"id":"9bfb0a98-4f2c-4c89-a521-49fd6e95fb4e","name":"Calculator"}],"connections":{"When chat message received":{"main":[[{"node":"Helen | AI Agent","type":"main","index":0}]]},"MCP Chat Model":{"ai_languageModel":[[{"node":"Helen | AI Agent","type":"ai_languageModel","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"Helen | AI Agent","type":"ai_memory","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Helen | AI Agent","type":"main","index":0}]]},"MCP - Execute Resource":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"MCP Client - List Resources":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"MCP - Execute Prompt":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"MCP - List Prompts":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"MCP - Execute Tool":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"MCP - List Tools":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"MCP - Error Log":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]},"Calculator":{"ai_tool":[[{"node":"Helen | AI Agent","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"9515ca84-fa78-45eb-8fd2-e4a0b8c21e0c","triggerCount":1,"tags":[]}