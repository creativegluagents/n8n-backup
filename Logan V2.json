{"createdAt":"2025-08-04T09:13:31.079Z","updatedAt":"2025-08-05T13:16:37.116Z","id":"QBAY3lJRkebdOVnR","name":"Logan V2","active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"89be668f-2e4f-4571-99fb-1c0cc1392919","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1072,-1248],"id":"e00a5f8e-f87d-4afd-9487-854717a2de5f","name":"Webhook","webhookId":"89be668f-2e4f-4571-99fb-1c0cc1392919"},{"parameters":{"chatId":"=1122663858","text":"=Hi Ashish, please select the appropriate option to proceed.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Add new inventory item(s)","additionalFields":{"callback_data":"add_items"}},{"text":"Update existing inventory item(s)","additionalFields":{"callback_data":"update_items"}}]}},{"row":{"buttons":[{"text":"Upload new packing list","additionalFields":{"callback_data":"upload_packing_list"}},{"text":"Query your inventory","additionalFields":{"callback_data":"query_inventory"}}]}}]},"additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-176,-1152],"id":"726c456e-0b93-423b-97a7-d2abcbd9da67","name":"Send response1","webhookId":"6b15184c-8ebc-41a6-8205-42564fabd15e","credentials":{"telegramApi":{"id":"3bl0ZiRunXRoY612","name":"Logan V2 Telegram"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"f214dc62-4330-4054-ac30-5c56f5ec78e3","leftValue":"={{ $json.body.callback_query.id }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-848,-1248],"id":"35104838-8597-49a9-a4ee-649fc75447ce","name":"Is inline button"},{"parameters":{"operation":"upsert","base":{"__rl":true,"value":"appjfd7iGxbyV0sb2","mode":"list","cachedResultName":"Logan New","cachedResultUrl":"https://airtable.com/appjfd7iGxbyV0sb2"},"table":{"__rl":true,"value":"tbl8SdTgYKs6PGKV0","mode":"list","cachedResultName":"Session State","cachedResultUrl":"https://airtable.com/appjfd7iGxbyV0sb2/tbl8SdTgYKs6PGKV0"},"columns":{"mappingMode":"defineBelow","value":{"Session ID":"={{ $json.body.callback_query.message.chat.id.toString() }}","State":"={{ $json.body.callback_query.data }}"},"matchingColumns":["Session ID"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":true},{"id":"Session ID","displayName":"Session ID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"State","displayName":"State","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-624,-1344],"id":"9dcb24d2-19b4-4a6e-b88d-2e461c15824c","name":"Set state","credentials":{"airtableTokenApi":{"id":"bDVfyeKNIcs0NKE7","name":"Gluagents Airtable"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.fields.State }}","rightValue":"add_items","operator":{"type":"string","operation":"equals"},"id":"41156a2c-f49b-49aa-ba51-ca1a34eafc74"}],"combinator":"and"}}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[-400,-1344],"id":"1a427cf2-61d1-4551-adaf-fe3ad83f4d2b","name":"State based routing"},{"parameters":{"chatId":"={{ $('Webhook').item.json.body.callback_query.message.chat.id.toString() }}","text":"=Please provide the item details:\n- name (required)\n- quantity\n- vendor\n- description\n- location\n\nLocation can be entered as row-rack-shelf-position, for example A12B or A-1-2-B (both mean Row A, Rack 1, Shelf 2, Position B).\n\nAvailable rows: Staging (default), A, B, C, D.\n\nAvailable positions: A, B, C, D, E, F, G.","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Reset","additionalFields":{"callback_data":"reset"}}]}}]},"additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-176,-1344],"id":"9659f118-23a6-4c72-9346-0059c2f6fc6f","name":"Add item response","webhookId":"fe45c5b0-7855-4d47-82b5-b5783074d67d","credentials":{"telegramApi":{"id":"3bl0ZiRunXRoY612","name":"Logan V2 Telegram"}}},{"parameters":{"operation":"search","base":{"__rl":true,"value":"appjfd7iGxbyV0sb2","mode":"list","cachedResultName":"Logan New","cachedResultUrl":"https://airtable.com/appjfd7iGxbyV0sb2"},"table":{"__rl":true,"value":"tbl8SdTgYKs6PGKV0","mode":"list","cachedResultName":"Session State","cachedResultUrl":"https://airtable.com/appjfd7iGxbyV0sb2/tbl8SdTgYKs6PGKV0"},"filterByFormula":"={Session Id} = {{ $('Webhook').item.json.body.callback_query.message.chat.id.toString() }}","returnAll":false,"limit":1,"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-624,-1152],"id":"afb283f2-5589-4183-8da6-15972ee0c94a","name":"Fetch state","credentials":{"airtableTokenApi":{"id":"bDVfyeKNIcs0NKE7","name":"Gluagents Airtable"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"61480736-52f4-44e2-a7e9-762652eeb1e2","leftValue":"","rightValue":"","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-400,-1152],"id":"fc0b1f63-2513-41e5-b1e5-bed5c7b970cb","name":"If"}],"connections":{"Webhook":{"main":[[{"node":"Is inline button","type":"main","index":0}]]},"Is inline button":{"main":[[{"node":"Set state","type":"main","index":0}],[{"node":"Fetch state","type":"main","index":0}]]},"Set state":{"main":[[{"node":"State based routing","type":"main","index":0}]]},"State based routing":{"main":[[{"node":"Add item response","type":"main","index":0}]]},"Fetch state":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[],[{"node":"Send response1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"94ae5997-20fa-4a6b-a550-1d2a74698105","triggerCount":1,"tags":[{"createdAt":"2025-06-30T11:35:53.792Z","updatedAt":"2025-06-30T11:35:53.792Z","id":"wWEKn0VtZYLErCuU","name":"ashish"}]}