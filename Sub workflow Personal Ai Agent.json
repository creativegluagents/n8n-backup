{"createdAt":"2025-05-05T07:58:03.963Z","updatedAt":"2025-05-05T08:05:14.706Z","id":"Jm4Ju6FU1zXocgOR","name":"Sub workflow Personal Ai Agent","active":false,"isArchived":false,"nodes":[{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[20,260],"id":"a3598774-a872-4940-9b03-8851953beaed","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"hpvxzuW3W9YmuUCO","name":"OpenAi account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[580,200],"id":"d51c6587-0a6e-41fd-a862-9e36220d0202","name":"Simple Memory"},{"parameters":{"descriptionType":"manual","toolDescription":"=This tool appends a new row to the connected Google Sheet with the user details collected by the AI Agent. The following fields will be stored:\n- Name\n- Email","operation":"append","documentId":{"__rl":true,"value":"1DBmr2FdkKllCirQEySZxEb8ilaUwXCIkPP8D_ugtJsc","mode":"list","cachedResultName":"Questions","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1DBmr2FdkKllCirQEySZxEb8ilaUwXCIkPP8D_ugtJsc/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1DBmr2FdkKllCirQEySZxEb8ilaUwXCIkPP8D_ugtJsc/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"Name":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Name', `Use the parameter \"Name\". `, 'string') }}","Email":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Email', `Use the parameter \"Email\". `, 'string') }}"},"matchingColumns":[],"schema":[{"id":"Name","displayName":"Name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Email","displayName":"Email","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.5,"position":[360,260],"id":"092760bf-7b04-46da-9fe5-98c838fe85a2","name":"Google Sheet Tool","credentials":{"googleSheetsOAuth2Api":{"id":"0e2MdtnLl9hGCdxD","name":"Google Sheets account 2"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1,"position":[200,260],"id":"c516c57c-5c8f-4499-b5ad-93eed1b1da74","name":"Think"},{"parameters":{"promptType":"define","text":"={{ $json.query }}","options":{"systemMessage":"=You are a Personal helpful assistant\n\n# AI Agent Prompt\n\n## System Instructions\nYou are a Personal helpful AI assistant. Your job is to gather all necessary information in a structured, sequential manner and provide all details once all information is collected.\n\n## Conversation Flow\nFollow this precise sequence of steps to collect information:\n1. Begin by greeting the user and saying: \"Hello, I have a new shipping request.\"\n2. Ask each question in the specified order, one at a time.\n3. Process the user's response to each question before moving to the next.\n4. Store all collected information.\n\n## Required Information (Ask in this exact sequence)\n1. \"What is your Name?\" (Collect user's name)  \n   - Store response as: `name`\n2. \"What is your Email Address?\" (Collect user's email)\n   - Store response as: `email`\n\n## Information Processing Guidelines\n\n### Contact Information\n- Extract name and email/phone from user input  \n- Validate email format when possible  \n- If information is incomplete, kindly ask for the missing details\n\n## Response Format\n1. Always acknowledge the user's previous answer with a brief confirmation  \n2. Ask only ONE question at a time  \n3. Keep responses conversational and friendly  \n4. If clarification is needed, briefly explain why before asking again  \n5. When all information is collected, provide a complete summary of the collected data\n\n## Final Response Template\n\nWhen all information is collected (after step 2), respond with:\n\n\"Thank you for providing all the necessary information.\n\nHere's a summary of your data:\n- Data: [Name], [Email]\n\nThank you!!\"\n\nThen call the **Google Sheet tool** to store the data. \n\n\n## Error Handling\n\n- If the user provides unclear information, politely ask for clarification  \n- If the user skips ahead or provides multiple pieces of information, acknowledge what you received and continue with the next unanswered question in sequence  \n- If the user asks questions during the process, briefly answer them and return to the current step  \n- If the user wants to change previous information, update it and continue from the current step  \n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[0,0],"id":"24a3c892-d9cf-43b1-9076-1fa9be449ad2","name":"Personal helpful AI Agent"},{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-200,0],"id":"ce7ef9dc-9f07-4a42-a6e9-862d2341b49f","name":"When Executed by Another Workflow"}],"connections":{"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Personal helpful AI Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Personal helpful AI Agent","type":"ai_memory","index":0}]]},"Google Sheet Tool":{"ai_tool":[[{"node":"Personal helpful AI Agent","type":"ai_tool","index":0}]]},"Think":{"ai_tool":[[{"node":"Personal helpful AI Agent","type":"ai_tool","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Personal helpful AI Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"9ecadeb2-5012-458e-b083-29de9bc27048","triggerCount":0,"tags":[]}