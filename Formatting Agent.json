{"createdAt":"2025-05-31T21:10:11.893Z","updatedAt":"2025-06-13T05:41:44.683Z","id":"JGEkIT08cFPKyabD","name":"Formatting Agent","active":false,"isArchived":false,"nodes":[{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-480,-80],"id":"97753e90-7aff-47c6-98ec-ed2efcff1257","name":"When Executed by Another Workflow"},{"parameters":{"folderId":"1LcUWEgi7CWgxHX_1BO2E_LQNXsb5p4Wd","title":"={{ $json.output.dealName }}"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[120,-80],"id":"d3621181-c5c5-4d0a-ace0-7c2c37810da8","name":"create a google doc file","credentials":{"googleDocsOAuth2Api":{"id":"yed2iEzlAVnsGwd9","name":"Dan"}}},{"parameters":{"operation":"update","documentURL":"={{ $json.id }}","actionsUi":{"actionFields":[{"action":"insert","text":"={{ $('AI Agent').item.json.output.finalHtmlOutput }}"}]}},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[380,-80],"id":"c1969994-b81b-4a4f-b58e-5147eeb387d1","name":"insert data into that file","credentials":{"googleDocsOAuth2Api":{"id":"Om41V3tJihrnzpYR","name":"Google Docs account"}}},{"parameters":{"promptType":"define","text":"={{ $json.text }}","hasOutputParser":true,"options":{"systemMessage":"=You are a helpful assistant.\n\nYour job is:\n1. Extract the **deal name** from the user message or proposal content.\n2. Generate a filename in this format: `dealName-proposal-{{ $now.format('yyyy-MM-dd') }}`\n3. Convert the entire user message or proposal content into a **clean and structured HTML** format suitable for inserting into a document (e.g., Google Docs or Word).\n\nüìå Output only:\n- `File Name:` dealName-proposal-{{ $now.format('yyyy-MM-dd') }}\n- `HTML Content:` Converted HTML version of the full message or proposal.\n\n‚ö†Ô∏è Instructions:\n- Do **not** include anything else.\n- `dealName` should be intelligently extracted from the message context or proposal text.\n- Maintain formatting: headings, paragraphs, bullet points, etc., in HTML.\n\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[-260,-80],"id":"52954c01-7d58-4c94-8261-337eb2c46a66","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-280,140],"id":"618b2b71-962a-4b9b-b564-bad1f1d61fba","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"L5UoHZfkBt6nb3Ad","name":"OpenAi Account"}}},{"parameters":{"assignments":{"assignments":[{"id":"9578b0ec-26b7-45ba-8ea5-c2e41e52838d","name":"finalMessage","value":"=üìÑ Your deal proposal has been created:\\n *Name:* {{ $('create a google doc file').item.json.name }}\\n *Doc Url:* https://docs.google.com/document/d/{{ $('create a google doc file').item.json.id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[780,-80],"id":"c86c3469-49e7-4485-803e-977208b1168e","name":"Edit Fields"},{"parameters":{"jsonSchemaExample":"{\n\t\"dealName\": \"\",\n\t\"finalHtmlOutput\": \"\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.2,"position":[-20,180],"id":"18fa5226-c2bb-4a5b-b1b4-d3567ee55b96","name":"Structured Output Parser"},{"parameters":{"url":"https://script.google.com/macros/s/AKfycbwTpxKX77s3mzFA3STsJzgI7-DEzvnluFEOLRMUNzZjgPxP3wHVFStyNsaNS2WzbltHuw/exec","sendQuery":true,"queryParameters":{"parameters":[{"name":"docId","value":"={{ $json.documentId }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[580,-80],"id":"c573fa2b-58b9-4739-a1f6-4b9d42eed9bf","name":"HTTP Request"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-380,460],"id":"90208fe5-b202-4ebb-a986-b429e0e51121","name":"When clicking ‚ÄòTest workflow‚Äô","disabled":true}],"connections":{"When Executed by Another Workflow":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"create a google doc file":{"main":[[{"node":"insert data into that file","type":"main","index":0}]]},"insert data into that file":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"create a google doc file","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent","type":"ai_outputParser","index":0}]]},"HTTP Request":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"e28c8eb5-e1af-4077-b169-f56ac4ab5b9c","triggerCount":0,"tags":[]}