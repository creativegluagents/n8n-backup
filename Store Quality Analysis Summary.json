{"createdAt":"2025-05-14T07:54:55.088Z","updatedAt":"2025-07-25T07:28:02.495Z","id":"hLBI0B5y93BEKzuh","name":"Store Quality Analysis Summary","active":false,"isArchived":false,"nodes":[{"parameters":{"promptType":"define","text":"=user input :: {{ $('Excute to get model output quality').item.json.input }}\n\noutput :: {{ $('Excute to get model output quality').item.json.output }}","options":{"systemMessage":"={{ $json.content }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[-416,-240],"id":"b0daed6c-048b-4990-88c2-aae4c7c2c745","name":"Metrics Calculator"},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1VKJPoULP5HRO1YqSmbNkkD4LAib2qO4-yJhy-Qq7ybY","mode":"list","cachedResultName":"Cost Estimation Agent Data","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1VKJPoULP5HRO1YqSmbNkkD4LAib2qO4-yJhy-Qq7ybY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":2106826816,"mode":"list","cachedResultName":"Quality Calculation","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1VKJPoULP5HRO1YqSmbNkkD4LAib2qO4-yJhy-Qq7ybY/edit#gid=2106826816"},"columns":{"mappingMode":"defineBelow","value":{"QualitySummary":"={{ $json.output }}","UserInput":"={{ $('Excute to get model output quality').item.json.input }}","AgentOutput":"={{ $('Excute to get model output quality').item.json.output }}","WorkflowName":"={{ $('Excute to get model output quality').item.json.workflowName }}","ExcuationID":"={{ $('Excute to get model output quality').item.json.executionID }}","createdAt":"={{ $now.format('yyyy-MM-dd hh:mm a') }}"},"matchingColumns":[],"schema":[{"id":"UserInput","displayName":"UserInput","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"AgentOutput","displayName":"AgentOutput","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"QualitySummary","displayName":"QualitySummary","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ExcuationID","displayName":"ExcuationID","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"WorkflowName","displayName":"WorkflowName","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"createdAt","displayName":"createdAt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[64,-240],"id":"49da4342-c9d8-4b64-bd6d-c6bc40f72619","name":"Store Quality Metrics Summary","credentials":{"googleSheetsOAuth2Api":{"id":"rVLVpC5FEF6wrTch","name":"Google Sheets account"}}},{"parameters":{"workflowInputs":{"values":[{"name":"input","type":"any"},{"name":"output","type":"any"},{"name":"workflowName","type":"any"},{"name":"executionID","type":"any"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-944,-240],"id":"59674dda-494b-434e-9a0f-c48743df20ea","name":"Excute to get model output quality"},{"parameters":{"content":"## Agent that calculates quality metrics. \n","height":260,"width":340},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-464,-320],"id":"f2e22a5e-d8bf-465f-8c75-1f746b1aaf55","name":"Sticky Note"},{"parameters":{"content":"## OpenRouter Chat Model\n","height":200,"width":300},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-480,-16],"id":"df96a9aa-2988-4c07-810e-9a3faf66e50c","name":"Sticky Note1"},{"parameters":{"content":"## Store Quality Metrics Summary (Google Sheets)\n","height":260,"width":380,"color":4},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-96,-320],"id":"eb249323-3d60-4863-98e3-66ec7e097ec1","name":"Sticky Note2"},{"parameters":{"content":"## Execute to get model output quality\n","height":260,"width":260},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1024,-320],"id":"4de05891-c266-4c44-b200-616e36eadee4","name":"Sticky Note3"},{"parameters":{"content":"## Execute to get model output quality\nThis workflow automates the evaluation of an LLM's response quality. It triggers a metrics agent that uses the OpenRouter model to analyze output performance across key quality indicators (e.g., relevance, coherence). The results are logged into a Google Sheet for tracking and comparison. (Optional DB storage is available but currently disabled.)","height":200,"width":460,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-624,-576],"id":"22fdc160-5172-4751-b315-d06cb7f04eec","name":"Sticky Note4"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-384,64],"id":"4d5154d3-5aff-4efd-9ffe-90c17e5e3b9d","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"G5B8fc5uUqqLH94p","name":"OpenAi account 3"}}},{"parameters":{"operation":"get","documentURL":"1oNVKrGjzTQ8fXj5OVcEYOV-r0oxjLGM_TV4priViAEg"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[-688,-240],"id":"4033b9c0-2a1c-4f98-a8d7-5f1f73300bd3","name":"Get a document","credentials":{"googleDocsOAuth2Api":{"id":"T0uBlmGwFoQcaNzt","name":"Gluagents Google Docs"}}}],"connections":{"Metrics Calculator":{"main":[[{"node":"Store Quality Metrics Summary","type":"main","index":0}]]},"Excute to get model output quality":{"main":[[{"node":"Get a document","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Metrics Calculator","type":"ai_languageModel","index":0}]]},"Get a document":{"main":[[{"node":"Metrics Calculator","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"516e21f3-43b9-4314-844a-05b088ee3cd2","triggerCount":0,"tags":[]}