{"createdAt":"2025-03-05T07:31:11.332Z","updatedAt":"2025-03-05T08:41:20.068Z","id":"Lnr6T3ucJsYpIvcw","name":"My workflow 2","active":false,"isArchived":false,"nodes":[{"parameters":{"formTitle":"Add doc","formDescription":"doc description","formFields":{"values":[{"fieldLabel":"file","fieldType":"file","multipleFiles":false}]},"responseMode":"lastNode","options":{}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.2,"position":[-680,-360],"id":"4852ad62-0471-4c60-b648-a9037c4b615b","name":"On form submission","webhookId":"f16101d5-e215-4b13-ad5f-f671ee3dbea0"},{"parameters":{"binaryPropertyName":"file","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-440,-360],"id":"1a73fab7-cf28-4d75-b790-accdd48229bf","name":"Extract from File"},{"parameters":{"fieldsToAggregate":{"fieldToAggregate":[{"fieldToAggregate":"label_public"}]},"options":{}},"type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[-220,-360],"id":"46122ad4-748d-47b9-91e2-0f9c9620e597","name":"Aggregate"},{"parameters":{"mode":"insert","pineconeIndex":{"__rl":true,"value":"test-doc","mode":"list","cachedResultName":"test-doc"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePinecone","typeVersion":1,"position":[0,-360],"id":"8e9d7c48-f78a-4365-a5bb-a429cbc0ceab","name":"Pinecone Vector Store","credentials":{"pineconeApi":{"id":"EnfM5lZWClj8IYRr","name":"PineconeApi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[-200,-140],"id":"f08de1f4-8a08-4644-ade3-ef8aa842b2ee","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"hpvxzuW3W9YmuUCO","name":"OpenAi account"}}},{"parameters":{"jsonMode":"expressionData","jsonData":"={{ $('Aggregate').item.json.label_public }}","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[140,-140],"id":"93428e3e-d126-4c96-953f-82794dc7babd","name":"Default Data Loader"},{"parameters":{"chunkSize":40,"chunkOverlap":10},"type":"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter","typeVersion":1,"position":[160,80],"id":"5bb2ccde-5930-4b93-8519-606584c20153","name":"Token Splitter"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-840,160],"id":"e867c1ef-892b-4112-8212-5ded29de924c","name":"When chat message received","webhookId":"543c9caf-e9a0-4aab-b308-e53432ed2b28"},{"parameters":{"options":{"systemMessage":"=You are an intelligent assistant designed to identify the most relevant medical questions based on the user's input. Use the connected n8n tool to analyze the input and return the best-matching questions from the predefined list. Ensure that no relevant questions are missed. If no exact match is found, return the closest possible matches instead of saying no relevant questions were found.\n\nExample:\nInput: I have a cancer.\n\nOutput: I found the following questions matching your input:\nDo you have cancer?\nDo you have stomach cancer?\nDo you have kidney cancer?\nDo you have thyroid cancer?\nDo you have pituitary cancer?\nDo you have prostate cancer?"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[-620,160],"id":"ae69dc2c-b617-4554-b403-3bcaf82b8fc3","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-680,380],"id":"e9b8d14f-358b-49ff-a502-2d3e240acfbb","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"hpvxzuW3W9YmuUCO","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"rrrrrrrrrreee"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-540,380],"id":"513a63d2-d910-4e8f-b308-bbb7ed95bbc1","name":"Window Buffer Memory"},{"parameters":{"name":"Question_Finder","description":"Call this tool to find the relevant information based on the user's input and return not found if no relevant information is found.","topK":6},"type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1,"position":[-40,320],"id":"602b4532-de65-49e5-bad3-2d886971cdbf","name":"Answer questions with a vector store"},{"parameters":{"pineconeIndex":{"__rl":true,"value":"test-doc","mode":"list","cachedResultName":"test-doc"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePinecone","typeVersion":1,"position":[-140,560],"id":"a5a3d9b0-dd6a-4b19-aed4-9c09229455cc","name":"Pinecone Vector Store1","credentials":{"pineconeApi":{"id":"EnfM5lZWClj8IYRr","name":"PineconeApi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[-140,740],"id":"8d8589c5-4f1c-4f49-a508-73b7dca8d586","name":"Embeddings OpenAI1","credentials":{"openAiApi":{"id":"hpvxzuW3W9YmuUCO","name":"OpenAi account"}}},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[280,460],"id":"8c2dafda-642d-438e-b978-a49b78709f74","name":"OpenAI Chat Model1","credentials":{"openAiApi":{"id":"hpvxzuW3W9YmuUCO","name":"OpenAi account"}}}],"connections":{"On form submission":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Pinecone Vector Store","type":"main","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Pinecone Vector Store","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Pinecone Vector Store","type":"ai_document","index":0}]]},"Token Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Window Buffer Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Answer questions with a vector store":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Pinecone Vector Store1":{"ai_vectorStore":[[{"node":"Answer questions with a vector store","type":"ai_vectorStore","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"Pinecone Vector Store1","type":"ai_embedding","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Answer questions with a vector store","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"172996f3-3dce-4caf-b831-00b81a8bae5e","triggerCount":0,"tags":[]}