{"createdAt":"2025-05-28T08:31:35.944Z","updatedAt":"2025-07-25T07:32:50.368Z","id":"P52GHv5dPorHBzxZ","name":"Hannah - RevOps","active":true,"isArchived":false,"nodes":[{"parameters":{"content":"## Hanna Agent","height":580,"width":1120,"color":4},"type":"n8n-nodes-base.stickyNote","position":[7152,224],"typeVersion":1,"id":"c4b05132-03c0-41d6-9eb8-6d5394286e5d","name":"Sticky Note1"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1","mode":"list","cachedResultName":"gpt-4.1"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[7200,640],"id":"9da7819e-c071-4e58-ad2a-a500f8073898","name":"OpenAI MCP Client Model","credentials":{"openAiApi":{"id":"L5UoHZfkBt6nb3Ad","name":"OpenAi Account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"### `error-log`\n\n- **Purpose:** record any workflow or tool error for later troubleshooting.  \n- **Required:** `message` — JSON object or array describing the error.","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"n8n_error_logs","mode":"list","cachedResultName":"n8n_error_logs"},"columns":{"mappingMode":"defineBelow","value":{"message":"={{ $fromAI('message', `The error message or array of error messages to be logged. Can include source and details.`, 'string') }}","session_id":"={{ $('Edit Fields').item.json.userId }}"},"matchingColumns":["id"],"schema":[{"id":"session_id","displayName":"session_id","required":true,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[7600,640],"id":"19bb20a9-6f37-4eaa-b16b-bcaa3f7ac17b","name":"Error Log","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Dan Supabase Postgres Account"}}},{"parameters":{},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[7792,640],"id":"18164489-376f-4699-a715-2861e62bf306","name":"MCP List tools","credentials":{"mcpClientApi":{"id":"OUjNkwlDjafsGW4l","name":"MCP Client (STDIO) account 2 Personal"}}},{"parameters":{"operation":"executeTool","toolName":"={{ $fromAI('tool_name') }}","toolParameters":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[7920,640],"id":"72fd8d07-2bf6-40e5-a451-ecfa2024db74","name":"MCP Execute Tool","credentials":{"mcpClientApi":{"id":"OUjNkwlDjafsGW4l","name":"MCP Client (STDIO) account 2 Personal"}},"onError":"continueRegularOutput"},{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[5872,384],"id":"3bac34fd-af7a-4e78-ab0d-35e6f565b19b","name":"Telegram Trigger","webhookId":"7546f695-b584-43b6-bde1-e0afd99614db","credentials":{"telegramApi":{"id":"Iw8VWBxFF8xrYlQ9","name":"Hanna"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').first().json.message.chat.id }}","text":"={{\"\"+ $json.output }}","replyMarkup":"forceReply","forceReply":{},"additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[8320,384],"id":"0366824c-e8db-454a-be6a-f3b50d776310","name":"Telegram","webhookId":"c0d35222-eaf9-43c0-b4a8-b2fc433fead2","alwaysOutputData":false,"notesInFlow":true,"credentials":{"telegramApi":{"id":"Iw8VWBxFF8xrYlQ9","name":"Hanna"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Edit Fields').item.json.userId }}"},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[7424,640],"id":"84b6620c-def1-445c-a29d-9b70e807d3ec","name":"Postgres Chat Memory1","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Dan Supabase Postgres Account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[8032,640],"id":"27f2c8c0-51cf-46d7-bc6b-0b0635b9cc58","name":"Calculator"},{"parameters":{"description":"Call this agent to generate the proposal of the deal, the input should be string containing all the details needed to generate the proposal.\n\nDetails needed:\nField\tRequired?\tPurpose (one-liner)\ndeal_name\tYes\tHeader, internal tracking\ncompany_name\tYes\tPersonalization in every section\nprimary_contact_name\tOptional\tWarmer greeting (“Dear …”)\nprimary_contact_title\tOptional\tAdds credibility (“CMO”, “VP Ops”)\ncompany_website\tOptional\tLets model reference real context\nindustry_sector\tOptional\tEnables sector-specific language\ndeal_size_budget\tOptional\tAligns “Fees” section with expectations\nproducts_in_hubspot_deal\tOptional\tDrives “Recommended Solutions” lineup\nprospect_product_interests\tOptional\tSame as above when CEO gives extra detail\npain_points_needs\tOptional\tFuels “Background & Client Objectives” copy\nurgency_or_go_live_date\tOptional\tHighlights speed in “Implementation”\ndiscount_or_pilot_terms\tOptional\tKeeps pricing promises consistent\ncompetitive_context_current_tools\tOptional\tSharpens differentiation copy\nprior_meeting_notes\tOptional\tAdds human touch (“As discussed on …”)\nlocation_timezone\tOptional\tHelpful for scheduling next steps","workflowId":{"__rl":true,"value":"nQwfWpQ6UCxJsOOT","mode":"list","cachedResultName":"Proposal Agent"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.2,"position":[8160,640],"id":"15228f19-dc3e-4f0b-9689-dfb2c8c5f91f","name":"Proposal Generation Tool"},{"parameters":{"resource":"file","fileId":"={{ $('Telegram Trigger').item.json.message.voice.file_id }}"},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[6592,512],"id":"bafd3826-1cd2-4667-8d0c-78fa510b19aa","name":"Telegram Get File","webhookId":"076f0443-c6cd-4324-a58f-49524dc15683","credentials":{"telegramApi":{"id":"Iw8VWBxFF8xrYlQ9","name":"Hanna"}},"onError":"continueRegularOutput"},{"parameters":{"resource":"audio","operation":"translate","options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[6768,512],"id":"7304f3a7-befe-4a34-9433-f9703c84fccd","name":"Transcribe Audio","credentials":{"openAiApi":{"id":"L5UoHZfkBt6nb3Ad","name":"OpenAi Account"}},"onError":"continueRegularOutput"},{"parameters":{"jsCode":"return [{\n  chatInput: $input.first().json?.message?.text ?? $input.first().json?.text,\n  sessionId: $(\"Telegram Trigger\").first().json.message.chat.id\n}];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[6944,352],"id":"e66d5c19-34f2-466f-9321-2c5c9f0868c0","name":"Input Transformer","onError":"continueRegularOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"4ce4c2eb-9554-4b0b-9687-3ed836f350c5","leftValue":"={{ $json.message.voice }}","rightValue":"","operator":{"type":"object","operation":"notExists","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[6384,368],"id":"c6e557d3-f03c-407b-aee5-c9b996df2929","name":"Is Chat Input","onError":"continueRegularOutput"},{"parameters":{"content":"## Telegram Input handler","height":600,"width":780,"color":4},"type":"n8n-nodes-base.stickyNote","position":[6352,224],"typeVersion":1,"id":"4c5a2afd-026c-4736-a18d-c001df6e6122","name":"Sticky Note"},{"parameters":{"promptType":"define","text":"={{ $('Edit Fields').item.json.user_message }}","hasOutputParser":true,"options":{"systemMessage":"={{ ($json.content && $json.content.trim().length > 0) ? $json.content : `\nYou are Hannah, Friendly, professional helper for Hubspot CRM tasks —Hubspot CRM Assistant (Creativeglu AI).\n---\nGreetings:\nIf you greet user, use this exact message:\nI’m Hannah, your AI RevOps agent from Creative Glu and CodeStrap. What do you need to unblock today?\n---\nInstructions:\n- Comprehend, understand and interpret user queries, especially within the context of sales and hubspot (CRM).\n- Before performing any operation first Call this tool MCP List tools to get all the tools available to use.\n- Call this tool MCP Execute tool to execute the selected tool and carefully follow the description and schema of each tool while executing the tool.\n- Some tools support pagination, when needed use them wisely if it is given in description of the tool.\n- When deal is moved to qualify to buy, call create proposal tool with required data\nNote: If tool execution fails, analyze and comprehend the error, attempt to resolve it, and retry the operation— up to three times. Do not immediately notify the user of a technical issue unless all retry attempts, including resolution efforts, have been exhausted.\n` }}","maxIterations":30,"returnIntermediateSteps":false}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[7728,352],"id":"d6a0f9a7-3ef5-4680-b351-39ed8d9193de","name":"Hanna - AI Chat Agent","retryOnFail":false,"onError":"continueRegularOutput"},{"parameters":{"workflowInputs":{"values":[{"name":"user_message ","type":"any"},{"name":"userId","type":"any"},{"name":"metadata","type":"any"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[5888,608],"id":"d8148314-26bc-452c-b0ad-a677e9d74e42","name":"When Executed by Another Workflow"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"77a1d14d-305f-4038-afc6-889e7f739353","leftValue":"={{ $('Edit Fields').item.json.userId }}","rightValue":"cg_admin","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[8128,352],"id":"ef1a013c-b032-4802-9453-793e17e53937","name":"If"},{"parameters":{"assignments":{"assignments":[{"id":"37f31698-8c4a-4f4d-b4ea-4e0f1a172e50","name":"user_message","value":"={{ $json['user_message '] || $('Telegram Trigger').item.json.message.text }}","type":"string"},{"id":"5fa8332f-795a-4022-afc4-7e37978f78b0","name":"userId","value":"={{ $json.userId || $('Telegram Trigger').item.json.message.chat.id }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[7264,352],"id":"7653aa03-cb6b-45d0-a055-93bcfb2e0e7e","name":"Edit Fields"},{"parameters":{"operation":"get","documentURL":"1B6_6Zq-A-xUU5NbhZCFnOoD3X1PFrbqkv9qzQ3gOn2s"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[7488,352],"id":"6aae5602-b8de-490b-80e0-0061fc612bcc","name":"Get a document","credentials":{"googleDocsOAuth2Api":{"id":"T0uBlmGwFoQcaNzt","name":"Gluagents Google Docs"}}},{"parameters":{"content":"# Trigger","height":600,"width":780,"color":3},"type":"n8n-nodes-base.stickyNote","position":[5520,224],"typeVersion":1,"id":"b98d58ef-b7ce-4e54-9937-61eb6b8df640","name":"Sticky Note2"}],"connections":{"OpenAI MCP Client Model":{"ai_languageModel":[[{"node":"Hanna - AI Chat Agent","type":"ai_languageModel","index":0}]]},"Error Log":{"ai_tool":[[{"node":"Hanna - AI Chat Agent","type":"ai_tool","index":0}]]},"MCP List tools":{"ai_tool":[[{"node":"Hanna - AI Chat Agent","type":"ai_tool","index":0}]]},"MCP Execute Tool":{"ai_tool":[[{"node":"Hanna - AI Chat Agent","type":"ai_tool","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Is Chat Input","type":"main","index":0}]]},"Postgres Chat Memory1":{"ai_memory":[[{"node":"Hanna - AI Chat Agent","type":"ai_memory","index":0}]]},"Calculator":{"ai_tool":[[{"node":"Hanna - AI Chat Agent","type":"ai_tool","index":0}]]},"Proposal Generation Tool":{"ai_tool":[[{"node":"Hanna - AI Chat Agent","type":"ai_tool","index":0}]]},"Telegram Get File":{"main":[[{"node":"Transcribe Audio","type":"main","index":0}]]},"Transcribe Audio":{"main":[[{"node":"Input Transformer","type":"main","index":0}]]},"Input Transformer":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Is Chat Input":{"main":[[{"node":"Input Transformer","type":"main","index":0}],[{"node":"Telegram Get File","type":"main","index":0}]]},"Hanna - AI Chat Agent":{"main":[[{"node":"If","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"If":{"main":[[],[{"node":"Telegram","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Get a document","type":"main","index":0}]]},"Get a document":{"main":[[{"node":"Hanna - AI Chat Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"9153d0a3-e8bb-482e-bc17-98b0f699bc7c","triggerCount":1,"tags":[{"createdAt":"2025-04-16T15:47:30.324Z","updatedAt":"2025-04-16T15:47:30.324Z","id":"iuHH1i6Z5YT5XHkS","name":"Main"},{"createdAt":"2025-06-01T16:00:52.436Z","updatedAt":"2025-06-01T16:00:59.278Z","id":"MjOiYL5GnVjfwraW","name":"Hannah"}]}