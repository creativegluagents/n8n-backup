{"createdAt":"2025-05-15T12:43:13.088Z","updatedAt":"2025-05-31T15:20:28.153Z","id":"zkDz6xJ0WWG5xSyr","name":"MCP Client","active":true,"isArchived":false,"nodes":[{"parameters":{"options":{"systemMessage":"## Helen — CRM Assistant (Creativeglu AI)\n\nFriendly, professional helper for CRM tasks.\n\n---\n\n### Core Entities  \n**Contacts · Companies · Deals · Stages · Pipelines**\n\n---\n\n### Operations (with synonyms)  \nGet · Create · Update · Delete · Associate\n\n---\n\n### Compound & Flow Support  \n1. Resolve missing IDs (contact, stage, pipeline).  \n2. Build the final payload.  \n3. **Confirm** before any destructive or high-value action.\n\n---\n\n### Defaults & Safety  \n* Apply sensible defaults when optional fields are missing and tell the user.  \n* Always confirm before deleting, overwriting, or handling large amounts.\n\n---\n\n### Communication Rules  \n* Replies ≤ 100 words; short sentences.  \n* Use Markdown for bullets, lists, and code blocks where helpful.  \n* Understand both spoken and typed input via NLP.  \n* If the user asks for a numeric result (e.g., “sum”, “how much”, “total”), give the figure directly—no extra explanation unless requested.\n\n---\n\n### Built-in Commands  \n`/start` · `/stop` · `/reset` · `/tool` · `/help` · `/info`\n\n---\n\n### Quick Examples  \n\n| User Says                               | Interpreted Action                  |\n|-----------------------------------------|-------------------------------------|\n| “Add John Smith john@example.com”       | **create-contact**                  |\n| “Create $1,000 deal for Acme”           | lookup company → **create-deal**    |\n| “Move Spring deal to Demo”              | **move-deal-stage**                 |\n| “Delete Jane Doe contact”               | confirm → **delete-contact**        |\n\n---\n\n### Reference Schemas (minimal)\n\n*Contacts* `{contactId, name, email, phone, companyId}`  \n*Companies* `{companyId, name, phone, domain}`  \n*Deals* `{dealId, name, amount, stageId, contactIds, companyIds}`  \n*Stages* `{stageId, label, pipelineId}`  \n*Pipelines* `{pipelineId, label, stageIds}`\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[7900,380],"id":"a3963986-685f-449f-b586-8480502b6bc0","name":"MCP Client - AI Chat Agent","retryOnFail":false,"onError":"continueRegularOutput"},{"parameters":{"content":"## MCP Client - Workflow","height":720,"width":1420,"color":4},"type":"n8n-nodes-base.stickyNote","position":[7360,300],"typeVersion":1,"id":"c9bf4080-03e1-435d-bef1-3748e53b9ad4","name":"Sticky Note1"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[7780,580],"id":"b97ca8ad-dc8c-4f73-aac8-7bd483ab3297","name":"OpenAI MCP Client Model","credentials":{"openAiApi":{"id":"L5UoHZfkBt6nb3Ad","name":"OpenAi Account"}}},{"parameters":{"contextWindowLength":15},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[7900,700],"id":"3be4df4e-50a1-489e-ab78-51a7f578023f","name":"Postgres MCP Client - Chat Memory","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Postgres Account"}}},{"parameters":{"descriptionType":"manual","toolDescription":"### reset-session\n\n- **Purpose:** Clear all memory, context, and active flows to start fresh.  \n- **Required:** `reason` — string explaining why the reset is needed.  \n- **Behavior:** Wipes stored data, ends multi-step processes, logs the reason, and returns the assistant to a clean state.\n","operation":"deleteTable","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"n8n_chat_histories","mode":"list","cachedResultName":"n8n_chat_histories"},"deleteCommand":"delete","where":{"values":[{"column":"session_id","value":"={{ $json.sessionId }}"}]},"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[8140,700],"id":"a846eb0d-16c9-424a-a19b-ca5577a050f4","name":"Reset Session","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Postgres Account"}},"onError":"continueRegularOutput"},{"parameters":{"descriptionType":"manual","toolDescription":"### `error-log`\n\n- **Purpose:** record any workflow or tool error for later troubleshooting.  \n- **Required:** `message` — JSON object or array describing the error.","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"n8n_error_logs","mode":"list","cachedResultName":"n8n_error_logs"},"columns":{"mappingMode":"defineBelow","value":{"message":"={{ $fromAI('message', `The error message or array of error messages to be logged. Can include source and details.`, 'string') }}","session_id":"={{ $json.sessionId }}"},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"session_id","displayName":"session_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[8020,840],"id":"9f9b7135-c61e-4562-b353-0767b75e3fae","name":"Error Log","credentials":{"postgres":{"id":"kS35e9jQpjf0T0s4","name":"Postgres Account"}}},{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[7460,380],"id":"52d7da78-7c32-48da-a53a-40430342b415","name":"MCP Client - Sub-Workflow"},{"parameters":{"public":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[7460,640],"id":"9d825350-9d19-46bf-9174-3aeacd09ad07","name":"MCP Client - Chat","webhookId":"583a9b22-7c4a-44ab-a60c-59745e10e481"},{"parameters":{"connectionType":"sse"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[8300,620],"id":"05395414-bbba-4676-a1d5-288cd8877222","name":"MCP Client","credentials":{"mcpClientSseApi":{"id":"Cof3wSJ3WmL3nzzx","name":"MCP Client (STDIO)"}}}],"connections":{"OpenAI MCP Client Model":{"ai_languageModel":[[{"node":"MCP Client - AI Chat Agent","type":"ai_languageModel","index":0}]]},"Postgres MCP Client - Chat Memory":{"ai_memory":[[{"node":"MCP Client - AI Chat Agent","type":"ai_memory","index":0}]]},"Reset Session":{"ai_tool":[[{"node":"MCP Client - AI Chat Agent","type":"ai_tool","index":0}]]},"Error Log":{"ai_tool":[[{"node":"MCP Client - AI Chat Agent","type":"ai_tool","index":0}]]},"MCP Client - Sub-Workflow":{"main":[[{"node":"MCP Client - AI Chat Agent","type":"main","index":0}]]},"MCP Client - Chat":{"main":[[{"node":"MCP Client - AI Chat Agent","type":"main","index":0}]]},"MCP Client":{"ai_tool":[[{"node":"MCP Client - AI Chat Agent","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"b0e48dc8-c4f8-4e66-a1df-ae6e885ee65b","triggerCount":1,"tags":[]}